<!-- Completed Bookings Title Section -->
<div class="dashboard-header">
    <p class="total-transactions-number">123</p>
    <h1 class="dashboard-title">Completed Transactions</h1>
    <p class="dashboard-description">
        You've done this many bookings! We appreciate your trust in our services.
        <br>Each booking reflects your commitment
        to making your home more comfortable and well-maintained.
    </p>
</div>

<!-- Completed Bookings Section -->
<div class="pending-bookings-content">
    <div class="columns-container">
        <!-- Loop through visibleBookings and generate cards -->
        <div *ngFor="let booking of visibleBookings" class="card">
            <div class="card-content">
                <h3>{{ booking.serviceProvider }}</h3>
                <div class="info">
                    <i class="pi pi-cog"></i>
                    <p>{{ booking.servicesRequested }}</p>
                </div>
                <div class="info">
                    <i class="pi pi-calendar"></i>
                    <p>{{ booking.selectedDate }}</p>
                </div>
                <button class="see-booking-btn" (click)="showBookingDetails(booking)">View Details</button>
            </div>
        </div>
    </div>

    <!-- "See More" button (only show when there are more bookings to load) -->
    <div *ngIf="visibleBookings.length < allBookings.length">
        <button class="see-more-btn" (click)="loadMoreBookings()">See More</button>
    </div>
</div>

<!-- Dialog displaying the details of the completed booking -->
<p-dialog header="Transaction Details" [modal]="true" [(visible)]="visible" [style]="{ width: '40rem'}">
    <span class="review-text">
        Review the detailed information for this specific completed transaction. This includes all relevant details, to
        ensure clarity and easy reference for your records.
    </span>

    <!-- Form Fields displaying booking details -->
    <div class="flex flex-column gap-3 mb-3">
        <label for="serviceProvider" class="field-label">
            <span class="label-text">
                <i class="pi pi-user"></i> Service Provider
            </span>
            <input pInputText id="serviceProvider" [(ngModel)]="selectedBooking.serviceProvider" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="servicesRequested" class="field-label">
            <span class="label-text">
                <i class="pi pi-wrench"></i> Services Requested
            </span>
            <input pInputText id="servicesRequested" [(ngModel)]="selectedBooking.servicesRequested" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="selectedDate" class="field-label">
            <span class="label-text">
                <i class="pi pi-calendar"></i> Selected Date
            </span>
            <input pInputText id="selectedDate" [(ngModel)]="selectedBooking.selectedDate" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="selectedTime" class="field-label">
            <span class="label-text">
                <i class="pi pi-clock"></i> Selected Time
            </span>
            <input pInputText id="selectedTime" [(ngModel)]="selectedBooking.selectedTime" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="remarks" class="field-label">
            <span class="label-text">
                <i class="pi pi-comment"></i> Remarks
            </span>
            <textarea pInputTextarea id="remarks" [(ngModel)]="selectedBooking.remarks" [disabled]="true"
                class="field-input" rows="4"></textarea>
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="dateOfSubmission" class="field-label">
            <span class="label-text">
                <i class="pi pi-calendar"></i> Date of Submission
            </span>
            <input pInputText id="dateOfSubmission" [(ngModel)]="selectedBooking.dateOfSubmission" [disabled]="true"
                class="field-input" />
        </label>
    </div>
</p-dialog>