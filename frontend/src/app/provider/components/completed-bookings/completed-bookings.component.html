<!-- Completed Bookings Title Section -->
<div class="dashboard-header">
    <p class="total-transactions-number">123</p>
    <h1 class="dashboard-title">Completed Transactions</h1>
    <p class="dashboard-description">
        You've completed this much bookings! Stay on top of everything and maintain a clear record of your past
        appointments.
    </p>
</div>

<!-- Completed Bookings Section -->
<div class="pending-bookings-content">
    <div class="columns-container">
        <!-- Loop through visibleBookings and generate cards -->
        <div *ngFor="let booking of visibleBookings" class="card">
            <div class="card-content">
                <h3>{{ booking.customerName }}</h3>
                <div class="info">
                    <i class="pi pi-calendar"></i>
                    <p>{{ booking.bookingDate }}</p>
                </div>
                <div class="info">
                    <i class="pi pi-clock"></i>
                    <p>{{ booking.bookingTime }}</p>
                </div>
                <button class="see-booking-btn" (click)="showBookingDetails(booking)">View Details</button>
            </div>
        </div>
    </div>

    <!-- "See More" button (only show when there are more bookings to load) -->
    <div *ngIf="visibleBookings.length < allBookings.length">
        <button class="see-more-btn" (click)="loadMoreBookings()">See More</button>
    </div>
</div>



<!-- Dialog displaying the details of the booking -->
<p-dialog header="Transaction Details" [modal]="true" [(visible)]="visible" [style]="{ width: '40rem'}">
    <span class="review-text">
        Review the detailed information for this specific completed transaction. This includes all relevant details, to
        ensure clarity and easy reference for your records.
    </span>


    <!-- Form Fields displaying customer booking details -->
    <div class="flex flex-column gap-3 mb-3">
        <label for="customerName" class="field-label">
            <span class="label-text">
                <i class="pi pi-user"></i> Customer Name
            </span>
            <input pInputText id="customerName" [(ngModel)]="selectedBooking.customerName" [disabled]="true"
                class="field-input" />
        </label>

    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="contactNumber" class="field-label">
            <span class="label-text">
                <i class="pi pi-phone"></i> Contact Number</span>
            <input pInputText id="contactNumber" [(ngModel)]="selectedBooking.contactNumber" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="email" class="field-label">
            <span class="label-text">
                <i class="pi pi-envelope"></i> Email Address</span>
            <input pInputText id="email" [(ngModel)]="selectedBooking.customerEmail" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="service" class="field-label">
            <span class="label-text">
                <i class="pi pi-wrench"></i> Availing Service/s</span>
            <input pInputText id="service" [(ngModel)]="selectedBooking.availingService" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="bookingDate" class="field-label">
            <span class="label-text">
                <i class="pi pi-calendar"></i> Booking Date</span>
            <input pInputText id="bookingDate" [(ngModel)]="selectedBooking.bookingDate" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="bookingTime" class="field-label">
            <span class="label-text">
                <i class="pi pi-clock"></i> Booking Time</span>
            <input pInputText id="bookingTime" [(ngModel)]="selectedBooking.bookingTime" [disabled]="true"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="remarks" class="field-label">
            <span class="label-text">
                <i class="pi pi-comment"></i> Remarks</span>
            <textarea pInputTextarea id="remarks" [(ngModel)]="selectedBooking.remarks" [disabled]="true"
                class="field-input" rows="4"></textarea>
        </label>
    </div>

    <div class="flex-right">
        <button pButton label="Report User" class="reject-button" (click)="openReportDialog()"></button>
    </div>
</p-dialog>

<!-- Report User Dialog -->
<p-dialog header="Report User" [modal]="true" [(visible)]="reportDialogVisible" [style]="{ width: '40rem'}">
    <div class="flex flex-column gap-3 mb-3">
        <label for="reportTitle" class="field-label">
            <span class="label-text">
                <i class="pi pi-book"></i> Report Title
            </span>
            <input pInputText id="reportTitle" [(ngModel)]="reportTitle" placeholder="Enter report title"
                class="field-input" />
        </label>
    </div>

    <div class="flex flex-column gap-3 mb-3">
        <label for="reportDescription" class="field-label">
            <span class="label-text">
                <i class="pi pi-comment"></i> Description of Report
            </span>
            <textarea pInputTextarea id="reportDescription" [(ngModel)]="reportDescription"
                placeholder="Enter report description" class="field-input" rows="4"></textarea>
        </label>
    </div>

    <div class="flex-right">
        <button pButton label="Submit Report" class="approve-button" (click)="submitReport()"></button>
        <button pButton label="Cancel" class="reject-button" (click)="closeReportDialog()"></button>
    </div>
</p-dialog>