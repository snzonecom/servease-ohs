<!-- Profile Details Title Section -->
<div class="dashboard-header">
    <h1 class="dashboard-title">Profile Details</h1>
    <p class="dashboard-description">Manage and update your information to keep your account up to date. Some fields may
        not be editable after verification.</p>
</div>

<!-- Profile Details Card Section -->
<div class="profile-card-container">
    <p-card class="profile-card">
        <ng-template pTemplate="header">
            <div class="header-content">
                <i class="pi pi-id-card header-icon"></i>
                <span class="header-title">Business Information</span>
            </div>
        </ng-template>

        <div class="card-content">
            <div class="info-row-container">
                <div class="info-row">
                    <label for="businessLogo">Business Logo:</label>
                    <p-image [src]="provider.profile_pic" alt="Business Logo" height="150"></p-image>
                    <input type="file" id="businessLogo" (change)="onFileSelected($event)" *ngIf="isEditing">
                </div>

                <div class="info-row">
                    <label for="businessName">Business Name:</label>
                    <input id="businessName" type="text" [(ngModel)]="provider.provider_name" disabled />
                </div>

                <div class="info-row">
                    <label for="email">Email Address:</label>
                    <input id="email" type="email" [(ngModel)]="provider.email" [disabled]="!isEditing" />
                </div>

                <div class="info-row">
                    <label for="contactNumber">Contact Number:</label>
                    <input id="contactNumber" type="tel" [(ngModel)]="provider.contact_no" [disabled]="!isEditing" />
                </div>

                <div class="info-row">
                    <label for="officeAdd">Office Address:</label>
                    <input id="officeAdd" type="text" [(ngModel)]="provider.office_add" [disabled]="!isEditing" />
                </div>

                <div class="info-row">
                    <label for="brgy">Barangay:</label>
                    <select id="brgy" [(ngModel)]="provider.brgy" [disabled]="!isEditing" class="custom-dropdown">
                        <option *ngFor="let barangay of barangays" [value]="barangay">{{ barangay }}</option>
                    </select>
                </div>

                <div class="info-row">
                    <label for="city">City:</label>
                    <select id="city" [(ngModel)]="provider.city" (change)="onCityChange(provider.city)"
                        [disabled]="!isEditing" class="custom-dropdown">
                        <option *ngFor="let city of cities" [value]="city.name">{{ city.name }}</option>
                    </select>
                </div>

                <div class="info-row">
                    <label for="province">Province:</label>
                    <select id="province" [(ngModel)]="provider.province" (change)="onProvinceChange(provider.province)"
                        [disabled]="!isEditing" class="custom-dropdown">
                        <option *ngFor="let province of provinces" [value]="province.province">{{ province.province }}
                        </option>
                    </select>
                </div>

                <div class="info-row">
                    <label for="brn">Business Registration Number (BRN):</label>
                    <input id="brn" type="text" [(ngModel)]="provider.brn" disabled />
                </div>

                <div class="info-row">
                    <label for="contactPerson">Contact Person:</label>
                    <input id="contactPerson" type="text" [(ngModel)]="provider.contact_person"
                        [disabled]="!isEditing" />
                </div>

                <div class="info-row">
                    <label for="serviceType">Service Type:</label>
                    <select id="serviceType" [(ngModel)]="provider.service_type" disabled
                        class="custom-dropdown">
                        <option *ngFor="let category of serviceCategories" [value]="category.category_id">
                            {{ category.category_name }}
                        </option>
                    </select>
                </div>




                <!-- âœ… New Password Field (Visible in Edit Mode Only) -->
                <div class="info-row" *ngIf="isEditing">
                    <label for="newPassword">New Password:</label>
                    <input id="newPassword" type="password" [(ngModel)]="provider.new_password"
                        placeholder="Enter new password" />
                    <small class="info-text">Leave blank if you don't want to change the password.</small>
                </div>
            </div>
        </div>
    </p-card>

    <!-- Buttons Outside the Card -->
    <div class="button-container" style="text-align: center; margin-top: 10px;">
        <button pButton type="button" label="Edit Profile" icon="pi pi-pencil" class="buttons-below"
            (click)="editProfile()" *ngIf="!isEditing"></button>
        <button pButton type="button" label="Save Details" icon="pi pi-save" class="buttons-below"
            (click)="saveProfile()" *ngIf="isEditing"></button>
    </div>
</div>